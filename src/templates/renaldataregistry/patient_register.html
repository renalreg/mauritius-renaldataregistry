{% extends 'base.html' %}

{% block extrahead %}
{{ patient_form.media }}
{% load static %}
<script src="{% static 'js/form_tabs.js' %}"></script>
<link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
{% endblock %}

{% load crispy_forms_tags %}
{% block content %}

{% if patient_form.non_field_errors %}
<ul>
    {% for error in patient_form.non_field_errors %}
    <li>{{ error }}</li>
    {% endfor %}
</ul>
{% endif %}

<h1>Register patient</h1>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-5">
            <form class="" id="mrr_form" action="" method="post">
                {% csrf_token %}
                <div class="tab">
                    <div class="mb-3">
                        <h2>Primary details:</h2>
                    </div>
                    <div class="mb-3">
                        {{patient_form.id_type | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.id | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientregistration_form.health_institution | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientregistration_form.unit | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.name | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.surname | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.dob | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.gender | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientaddress_form.postcode | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientaddress_form.street | as_crispy_field}}
                    </div>
                    {{ patientcontact_forms.management_form }}
                    {% for form in patientcontact_forms %}
                    <div class="mb-3">
                        {{ form.contactvalue | as_crispy_field}}
                    </div>
                    {% endfor %}
                </div>
                <div class="tab">
                    <div class="mb-3">
                        <h2>Other details:</h2>
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Height (cm)</label>
                        {{patientmeasurement_form1.measurementvalue | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Weight (kg)</label>
                        {{patientmeasurement_form2.measurementvalue | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Birth weight (kg)</label>
                        {{patientmeasurement_form3.measurementvalue | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.ethnic | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.maritalstatus | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patient_form.occupationalstatus | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Current employment</label>
                        {{patientoccupation_form1.occupation | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Significant previous occupation 1</label>
                        {{patientoccupation_form2.occupation | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Significant previous occupation 2</label>
                        {{patientoccupation_form3.occupation | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Significant previous occupation 3</label>
                        {{patientoccupation_form4.occupation | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        <label class="col-form-label">Significant previous occupation 4</label>
                        {{patientoccupation_form5.occupation | as_crispy_field}}
                    </div>
                </div>
                <div class="tab">
                    <div class="mb-3">
                        <h2>KRT modality:</h2>
                    </div>
                    <p>Give chronology of previous and present KRT modalities</p>
                    <div class="p-3 mb-2 bg-info text-dark">
                        <legend>First KRT modality</legend>
                        <div class="row g-2">
                            <div class="col-sm">
                                {{patientkrtmodality_form1.modality | as_crispy_field}}
                            </div>
                            <div class="col-sm-6">
                                {{patientkrtmodality_form1.start_date | as_crispy_field}}
                            </div>
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-sm">
                            {{patientkrtmodality_form2.modality | as_crispy_field}}
                        </div>
                        <div class="col-sm-6">
                            {{patientkrtmodality_form2.start_date | as_crispy_field}}
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-sm">
                            {{patientkrtmodality_form3.modality | as_crispy_field}}
                        </div>
                        <div class="col-sm-6">
                            {{patientkrtmodality_form3.start_date | as_crispy_field}}
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-sm">
                            {{patientkrtmodality_form4.modality | as_crispy_field}}
                        </div>
                        <div class="col-sm-6">
                            {{patientkrtmodality_form4.start_date | as_crispy_field}}
                        </div>
                    </div>
                    <div class="row g-2">
                        <div class="col-sm">
                            {{patientkrtmodality_form5.modality | as_crispy_field}}
                        </div>
                        <div class="col-sm-6">
                            {{patientkrtmodality_form5.start_date | as_crispy_field}}
                        </div>
                    </div>
                    <div class="p-3 mb-2 bg-info text-dark">
                        <legend>Present KRT modality</legend>
                        <div class="row g-2">
                            <div class="col-sm">
                                {{patientkrtmodality_form6.modality | as_crispy_field}}
                            </div>
                            <div class="col-sm-6">
                                {{patientkrtmodality_form6.start_date | as_crispy_field}}
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        {{patientkrtmodality_form1.hd_unit | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientakimeasurement_form.creatinine | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientakimeasurement_form.egfr | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientakimeasurement_form.measurement_date | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientkrtmodality_form1.hd_initialaccess | as_crispy_field}}
                    </div>
                </div>
                <div class="tab">
                    <div class="mb-3">
                        <h2>Initial assessment:</h2>
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.comorbidity | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.disability | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.smokingstatus | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.alcoholuse | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.hepatitis_b | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.hepatitis_c | as_crispy_field}}
                    </div>
                    <div class="mb-3">
                        {{patientassessment_form.hiv | as_crispy_field}}
                    </div>
                </div>
                <div class="mb-3">
                    <button type="button" class="prevBtn btn btn-primary btn-block btn-sm">Previous</button>
                    <button type="button" class="nextBtn btn btn-primary btn-block btn-sm">Next</button>
                </div>
                <div style="text-align:center;margin-top:40px;">
                    <span class="step"></span>
                    <span class="step"></span>
                    <span class="step"></span>
                    <span class="step"></span>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}